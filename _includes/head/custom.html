<!-- start custom head snippets -->
<link rel="preconnect" href="https://fonts.googleapis.com"> 
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- insert favicons. use https://realfavicongenerator.net/  + manifest는 한번 봐야함-->
<link rel="apple-touch-icon" sizes="180x180" href="{{site.baseurl}}/assets/logo.ico/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="192x192"  href="{{site.baseurl}}/assets/logo.ico/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512"  href="{{site.baseurl}}/assets/logo.ico/android-chrome-512x512.png">
<link rel="icon" type="image/png" sizes="32x32" href="{{site.baseurl}}/assets/logo.ico/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="{{site.baseurl}}/assets/logo.ico/favicon-16x16.png">
<link rel="manifest" href="{{site.baseurl}}/assets/logo.ico/site.webmanifest">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<!-- google ads - Deferred loading -->
<script>
        (function () {
                var scripts = [
                        {
                                src: "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6253756472465876",
                                attrs: { async: true, crossorigin: "anonymous" }
                        },
                        {
                                src: "https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js",
                                attrs: { async: true, "custom-element": "amp-auto-ads" }
                        },
                        {
                                src: "https://fundingchoicesmessages.google.com/i/pub-6253756472465876?ers=1",
                                attrs: { async: true }
                        }
                ];

                function setAttributes(node, attrs) {
                        if (!attrs) return;
                        Object.keys(attrs).forEach(function (key) {
                                if (key === "async" && attrs[key] === true) {
                                        node.async = true;
                                        return;
                                }
                                node.setAttribute(key, attrs[key]);
                        });
                }

                function loadExternalScripts() {
                        scripts.forEach(function (definition) {
                                var existing = document.querySelector('script[src="' + definition.src + '"]');
                                if (existing) return;
                                var tag = document.createElement("script");
                                tag.src = definition.src;
                                setAttributes(tag, definition.attrs);
                                document.head.appendChild(tag);
                        });

                        (function signalGooglefcPresent() {
                                if (!window.frames.googlefcPresent) {
                                        if (document.body) {
                                                var iframe = document.createElement("iframe");
                                                iframe.style.cssText = "width:0;height:0;border:none;z-index:-1000;left:-1000px;top:-1000px;position:absolute";
                                                iframe.name = "googlefcPresent";
                                                document.body.appendChild(iframe);
                                        } else {
                                                setTimeout(signalGooglefcPresent, 0);
                                        }
                                }
                        })();
                }

                // Delay loading until after page interaction or 3 seconds
                var loaded = false;
                function schedule() {
                        if (loaded) return;
                        loaded = true;
                        
                        if ("requestIdleCallback" in window) {
                                requestIdleCallback(loadExternalScripts, { timeout: 3000 });
                        } else {
                                setTimeout(loadExternalScripts, 3000);
                        }
                }

                // Load on user interaction
                ['mousedown', 'touchstart', 'keydown', 'scroll'].forEach(function(event) {
                        window.addEventListener(event, schedule, { once: true, passive: true });
                });
                
                // Fallback: load after 3 seconds
                window.addEventListener('load', function() {
                        setTimeout(schedule, 3000);
                }, { once: true });
        })();
</script>

<!-- end custom head snippets -->